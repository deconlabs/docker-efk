ARG ELK_VERSION

# https://github.com/elastic/kibana-docker
FROM docker.elastic.co/kibana/kibana:${ELK_VERSION}

# Add your kibana plugins setup here
# Example: RUN kibana-plugin install <name|url>
COPY favicons/* /usr/share/kibana/src/legacy/ui/public/assets/favicons/
COPY logo_decon_kibana.svg /usr/share/kibana/node_modules/@elastic/eui/src/components/icon/assets/logo_kibana.svg
COPY logo_decon_kibana.svg /usr/share/kibana/node_modules/@elastic/eui/lib/components/icon/assets/logo_kibana.svg

# throbber customization 
RUN sed -i 's/Loading Kibana/Loading Decon/g' /usr/share/kibana/src/legacy/ui/ui_render/views/ui_app.pug
RUN sed -i 's/image\/svg+xml.*");/image\/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYwIiBoZWlnaHQ9IjI2MCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgo8cmVjdCB3aWR0aD0iMjYwIiBoZWlnaHQ9IjI2MCIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE5MS45MzYgMTcuODk1OEMxOTEuOTM2IDE3LjUyNTIgMTkxLjU2NSAxNy4zNCAxOTEuMTk1IDE3LjM0SDY0LjQ2OTJDNjQuMjg0IDE3LjM0IDYzLjkxMzQgMTcuNTI1MiA2My43MjgxIDE3LjcxMDVMMC4zNjU0NzcgMTI3LjU3NkMwLjE4MDIwNiAxMjcuOTQ3IDAuMTgwMTg5IDEyOC4zMTcgMC41NTA3MzEgMTI4LjUwM0MwLjczNjAwMiAxMjguNjg4IDAuOTIxMjc4IDEyOC42ODggMS4xMDY1NSAxMjguNjg4QzEuMjkxODIgMTI4LjY4OCAxLjI5MTgxIDEyOC42ODggMS40NzcwOSAxMjguNTAzTDE5MS41NjUgMTguODIyMUMxOTEuOTM2IDE4LjYzNjkgMTkxLjkzNiAxOC4yNjYzIDE5MS45MzYgMTcuODk1OFoiIGZpbGw9IiMzNjY3QjEiLz4KPHBhdGggZD0iTTE5Mi44NjIgMjQxLjg4OEwxMzAuMjQgMTMzLjUwNUMxMjkuNDk5IDEzMi4zOTMgMTI4Ljk0MyAxMzEuODM3IDEyNy42NDYgMTMxLjgzN0gyLjAzMjQzQzEuODQ3MTYgMTMxLjgzNyAxLjQ3NjYzIDEzMi4wMjMgMS4yOTEzNiAxMzIuMjA4QzEuMTA2MDkgMTMyLjM5MyAxLjEwNjA5IDEzMi43NjQgMS4yOTEzNiAxMzIuOTQ5TDY0LjgzOTMgMjQyLjYyOUM2NS4wMjQ2IDI0Mi44MTUgNjUuMjA5OCAyNDMgNjUuNTgwNCAyNDNIMTkyLjEyQzE5Mi4zMDYgMjQzIDE5Mi42NzYgMjQyLjgxNSAxOTIuODYyIDI0Mi42MjlDMTkzLjA0NyAyNDIuNDQ0IDE5My4wNDcgMjQyLjA3NCAxOTIuODYyIDI0MS44ODhaIiBmaWxsPSIjMUUzOTZDIi8+CjxwYXRoIGQ9Ik0yNTkuOTMgMTI5Ljk4NUwxOTcuMTIzIDIxLjA0NTRDMTk2LjkzOCAyMC42NzQ4IDE5Ni41NjcgMjAuNjc0OSAxOTYuMTk3IDIwLjY3NDlDMTk1LjgyNiAyMC42NzQ5IDE5NS42NDEgMjEuMDQ1NCAxOTUuNjQxIDIxLjQxNTlWMjM5LjI5NUMxOTUuNjQxIDIzOS42NjUgMTk1LjgyNiAyMzkuODUgMTk2LjE5NyAyNDAuMDM2SDE5Ni4zODJDMTk2LjU2NyAyNDAuMDM2IDE5Ni45MzggMjM5Ljg1IDE5Ny4xMjMgMjM5LjY2NUwyNTkuOTMgMTMwLjcyNkMyNjAuMTE1IDEzMC41NDEgMjYwLjExNSAxMzAuMTcgMjU5LjkzIDEyOS45ODVaIiBmaWxsPSIjMzY2N0IxIi8+CjxwYXRoIGQ9Ik0zLjE0MzQzIDEyOS4yNDVDMi4wMzE4IDEyOS45ODYgMi4wMzE4IDEzMC41NDIgMy41MTM5NiAxMzAuNTQySDEyOC4zODdDMTI5LjQ5OCAxMzAuNTQyIDEzMC4yMzkgMTMwLjkxMiAxMzAuOTggMTMyLjAyNEwxOTMuNDE3IDI0MC4wMzdDMTk0LjE1OCAyNDEuMTQ5IDE5NC43MTQgMjQxLjE0OSAxOTQuNzE0IDIzOS42NjZWMjEuMjMxOEMxOTQuNzE0IDE5LjkzNDkgMTkzLjc4NyAxOS4zNzkxIDE5Mi42NzYgMTkuOTM0OUwzLjE0MzQzIDEyOS4yNDVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkzLjA0NyAyMy40NTM5QzE5Mi42NzcgMjMuNDUzOSAxOTIuMzA2IDIzLjQ1MzkgMTkyLjEyMSAyMy44MjQ0TDEzMC45ODIgMTI5Ljc5OUMxMzAuNzk2IDEyOS45ODUgMTMwLjc5NiAxMzAuMzU1IDEzMC45ODIgMTMwLjU0MUwxOTIuMzA2IDIzNi43MDFDMTkyLjQ5MiAyMzYuODg2IDE5Mi42NzcgMjM3LjA3MSAxOTMuMDQ3IDIzNy4wNzFIMTkzLjIzM0MxOTMuNjAzIDIzNy4wNzEgMTkzLjc4OCAyMzYuNzAxIDE5My43ODggMjM2LjMzTDE5My42MDMgMjQuMTk1QzE5My42MDMgMjMuODI0NCAxOTMuNDE4IDIzLjQ1MzkgMTkzLjA0NyAyMy40NTM5WiIgZmlsbD0iI0U2RTdFOCIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI2MCIgaGVpZ2h0PSIyNjAiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==");/g' /usr/share/kibana/src/legacy/ui/ui_render/views/ui_app.pug /usr/share/kibana/src/legacy/ui/ui_render/views/chrome.pug

# custom HTML title information
RUN sed -i 's/title Kibana/title Heimdall/g' /usr/share/kibana/src/legacy/ui/ui_render/views/chrome.pug
